---
layout: post
title: 'Numpy便签'
date: 2022-2-10
author: 不显电性
cover: 'http://commcheck396.github.io/assets/img/2022_1_26/numpy.png'
tags: Python Numpy
---

# ~~补~~

> Numpy是类似于Python list的数据结构

# 基本操作

## 创建变量
```py 
cars = np.array([ # 与list类似
[
    [5, 10, 12, 6],
    [5.1, 8.2, 11, 6.3],
    [4.4, 9.1, 10, 6.6]
],
[
    [6, 11, 13, 7],
    [6.1, 9.2, 12, 7.3],
    [5.4, 10.1, 11, 7.6]
],
])

print("总维度：", cars.ndim) # .ndim可以查询数据维度
print("场地 1 数据：\n", cars[0], "\n场地 1 维度：", cars[0].ndim)
print("场地 2 数据：\n", cars[1], "\n场地 2 维度：", cars[1].ndim)
```

## 数据类型


## 添加数据
对于一维的数据，直接进行合并
```py
cars1 = np.array([5, 10, 12, 6])
cars2 = np.array([5.2, 4.2])
cars = np.concatenate([cars1, cars2])

#cars=[ 5.  10.  12.   6.   5.2  4.2]
```
若将数据扩大至二维
```py
test1 = np.array([5, 10, 12, 6])
test2 = np.array([5.1, 8.2, 11, 6.3])

# 首先需要把它们都变成二维，下面这两种方法都可以加维度
test1 = np.expand_dims(test1, 0)
test2 = test2[np.newaxis, :]

# test1=[[ 5 10 12  6]]
# test2=[[ 5.1  8.2 11.   6.3]]

# 然后再在第一个维度上叠加
all_tests = np.concatenate([test1, test2])
# all= [[ 5.  10.  12.   6. ] [ 5.1  8.2 11.   6.3]]
```

在不同维度进行合并
```py
# Take data 'all_tests' above for example
print("第一维度叠加：\n", np.concatenate([all_tests, all_tests], axis=0))
# 第一维度叠加：
#  [[ 5.  10.  12.   6. ]
#  [ 5.1  8.2 11.   6.3]
#  [ 5.  10.  12.   6. ]
#  [ 5.1  8.2 11.   6.3]]


print("第二维度叠加：\n", np.concatenate([all_tests, all_tests], axis=1))
# 第二维度叠加：
#  [[ 5.  10.  12.   6.   5.  10.  12.   6. ]
#  [ 5.1  8.2 11.   6.3  5.1  8.2 11.   6.3]]

# Not hard to understand

# 其实，只要维度能够对齐，你可以在任意维度上进行合并操作。注意，有些数据维度是对不齐的，这样没办法合并

a = np.array([
[1,2,3],
[4,5,6]
])
b = np.array([
[7,8],
[9,10]
])

print(np.concatenate([a,b], axis=1))  # 这个没问题
# [[ 1  2  3  7  8]
#  [ 4  5  6  9 10]]

# print(np.concatenate([a,b], axis=0))  # 这个会报错:(

```
还有更加便捷的直接进行水平/垂直方向合并的指令`np.vstack()`, `np.hstack()`

| |  | 
| --- | --- | 
| 1 | 2 |
| 3 | 4 |
| 5 | 6 |
 | 7 | 8 |

<br/>

| |  |  |  |
| --- | --- | --- | --- |
| 1 | 2 | 5 | 6 |
| 3 | 4 | 7 | 8 |

```py
a = np.array([
[1,2],
[3,4]
])
b = np.array([
[5,6],
[7,8]
])
print("竖直合并\n", np.vstack([a, b]))
# 竖直合并
#  [[1 2]
#  [3 4]
#  [5 6]
#  [7 8]]
print("水平合并\n", np.hstack([a, b]))
# 水平合并
#  [[1 2 5 6]
#  [3 4 7 8]]

```


## array形态改变
善用`reshape`
```py
test1 = np.array([5, 10, 12, 6])
test1.reshape(4,-1) # 要求行数为4，列数不限，参数为-1时为不限
# test1=[[ 5] [10] [12] [ 6]]
test1.reshape(2,-1,1)
# test1=[[[ 5]  [10]] [[12]  [ 6]]]
# Attention:reshape参数中不可以出现两个及以上-1
```
利用`shape`观察矩阵形态
```py
test1 = np.array([5, 10, 12, 6])
test1.reshape(2,-1,1)
#test1.shape=(2,2,1)
```